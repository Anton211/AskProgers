{% extends "layouts/base_login.html" %}
{% load static %}

{% block content %}
    <main class="container">
        <div class="row">
            <div class="col-1"></div>
            <section class="col">

                <div class="card border-0 mb-4 p-0">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-3">
                                <div class="text-center">
                                    <h5>{{ question.username }}</h5>
                                </div>
                                <div class="ratio ratio-1x1 mb-2 mt-2 w-100" style="width: 100px;">
                                    <img src="{% static question.photo %}" class="img-fluid" alt="img">
                                </div>

                                <div class="d-flex justify-content-center">
                                    <a type="button" class="no-border-button p-1">
                                        <div class="ratio ratio-1x1" style="width: 25px;">
                                            <img src="{% static "img/arrow-up.svg" %}" class="img-fluid" alt="arrow up">
                                        </div>
                                    </a>
                                    <div class="d-flex text-success align-items-center ms-1 me-1">
                                        {{ question.rate }}
                                    </div>
                                    <a type="button" class="no-border-button p-1">
                                        <div class="ratio ratio-1x1" style="width: 25px;">
                                            <img src="{% static "img/arrow-down.svg" %}" class="img-fluid"
                                                 alt="arrow down">
                                        </div>
                                    </a>
                                </div>

                                <p class="card-text text-center">
                                    <small class="text-body-secondary">
                                        Вопрос задан: <br> {{ question.date }}
                                    </small>
                                </p>
                            </div>

                            <div class="col-9 d-flex flex-column">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        {{ question.title }}
                                    </h5>
                                    <p class="card-text p-1">
                                        {{ question.content }}
                                    </p>
                                </div>

                                <div class="mb-3 align-self-end">
                                    <span>Теги:</span>
                                    {% for tag in question.tags %}
                                        <a class="link-primary link-underline-opacity-0" href="#">
                                            <span class="badge rounded-pill text-bg-primary">{{ tag }}</span>
                                        </a>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <ul class="nav mb-2 nav-underline">
                    <h4>Ответы: {{ question.num_ans }}</h4>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">Последние</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="#">Популярные</a>
                    </li>
                </ul>

                <answers class="d-flex gap-3 flex-column">
                    {% for ans in answers %}
                        <div class="card">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-2">
                                        <div class="text-center">
                                            <h6>{{ ans.username }}</h6>
                                        </div>

                                        <div class="ratio ratio-1x1 mb-2 w-100" style="width: 100px;">
                                            <img src="{% static ans.photo %}" alt="img" class="img-fluid">
                                        </div>

                                        <div class="d-flex justify-content-center">
                                            <a type="button" class="no-border-button p-1">
                                                <div class="ratio ratio-1x1" style="width: 20px;">
                                                    <img src="{% static "img/arrow-up.svg" %}" class="img-fluid"
                                                         alt="arrow up">
                                                </div>
                                            </a>

                                            <div class="d-flex text-success align-items-center ms-1 me-1">
                                                {{ ans.rate }}
                                            </div>

                                            <a type="button" class="no-border-button p-1">
                                                <div class="ratio ratio-1x1" style="width: 20px;">
                                                    <img src="{% static "img/arrow-down.svg" %}" class="img-fluid"
                                                         alt="arrow down">
                                                </div>
                                            </a>
                                        </div>
                                    </div>

                                    <div class="col d-flex flex-column justify-content-between">
                                        <div class="mt-2">
                                            <p class="card-text p-1">
                                                {{ ans.content }}
                                            </p>
                                        </div>

                                        <div class="row">
                                            {% if ans.true %}
                                                <div class="col text-success">
                                                    <p class="card-text">
                                                        <img src="{% static "img/check2-all.svg" %}" width="30"
                                                             height="30" alt="true answer"/>
                                                        Правильный ответ
                                                    </p>
                                                </div>
                                            {% else %}
                                                <div class="col"></div>
                                            {% endif %}

                                            <div class="col">
                                                <p class="text-center">
                                                    <small class="text-body-secondary">
                                                        Дата ответа: {{ ans.date }}
                                                    </small>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}

                    <nav class="mt-2">
                        <ul class="pagination justify-content-end">
                            <li class="page-item">
                                <a class="page-link text-dark" href="#" aria-label="Previous">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            <li class="page-item active">
                                <a class="page-link text-dark" href="#">1</a>
                            </li>
                            <li class="page-item">
                                <a class="page-link text-dark" href="#">2</a>
                            </li>
                            <li class="page-item">
                                <a class="page-link text-dark" href="#">3</a>
                            </li>
                            <li class="page-item">
                                <a class="page-link text-dark" href="#" aria-label="Next">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                        </ul>
                    </nav>

                    <div class="container border-0 mt-4 p-0">
                        <div class="mb-3">
                            <h5 class="p-2">Ответить:</h5>
                            <textarea class="form-control" rows="4" placeholder="Напишите ваш ответ..."></textarea>
                            <div class="d-flex justify-content-end mt-2">
                                <a class="btn btn-dark" type="submit">Отправить</a>
                            </div>
                        </div>
                    </div>

            </section>
{% endblock %}